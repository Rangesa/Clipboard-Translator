# Changelog

## [0.1.1] - 2025-01-15

### Changed

- **コード品質改善**
  - フォント設定を `ui/common.rs` に統合し、重複コードを削除
  - マジックナンバーを定数化（`DOUBLE_PRESS_WINDOW_MS`, `DEBOUNCE_DELAY_MS`, `HOTKEY_POLL_INTERVAL_MS`）
  - `unwrap()` をより安全なエラーハンドリングに置換（Mutex lock、Tokio Runtime作成時）
- **パフォーマンス改善**
  - **マルチプロセスからシングルプロセス方式に変更**
  - 翻訳UI表示時にプロセス起動のオーバーヘッドを削減（約100-200ms高速化）
  - メモリ使用量の削減

### Added

- **ホットキーカスタマイズ機能**: ユーザーが任意のキーコンビネーションを設定可能
  - 設定画面でボタンをクリック→キー入力→自動記録
  - Ctrl、Alt、Shiftと任意のキー（A-Z、0-9、F1-F12）の組み合わせに対応
  - デフォルトは `Ctrl+Shift+T`
- **シングルインスタンス制限**: Named Mutexによる多重起動防止
  - バックグラウンド監視モードで既に起動している場合、警告を表示して終了
  - 設定画面（`--setup`）や内部プロセスは複数起動可能
- **APIキー検証表示**: モデル取得成功時に「APIキーは有効です」と表示
- **APIタイムアウト**: 30秒のタイムアウトを設定（`API_TIMEOUT_SECS`）

### Fixed

- Mutex poisoning時のパニックを防止
- Tokio Runtime作成失敗時に適切なエラーメッセージを返すように修正

### Technical Details

**シングルプロセス化の詳細:**
- 従来: メインプロセス → 毎回新プロセス起動（`--translate`モード）→ UI表示
- 改善後: メインプロセス内でスレッド起動 → UI表示
- `spawn_result_process()`を`show_translation_ui()`に置き換え
- プロセス間通信のオーバーヘッドを削減し、起動速度を大幅に改善

## [0.1.0] - 初回リリース

### Features

- Ctrl+C+C ホットキーによるクリップボード翻訳
- Google Gemini API 連携
- 詳細/簡潔の2つの出力モード
- 設定GUI（APIキー、モデル選択、出力モード）
- Windowsスタートアップ登録/解除
- 日本語フォント対応（メイリオ）
- マークダウン形式での結果表示
